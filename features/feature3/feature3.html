<!DOCTYPE html>
<html>
<head>
    <title>Game Bóng Ăn 455 Bot</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background-color: #000;
            font-family: Arial, sans-serif;
        }
        canvas {
            display: block;
            background-color: #111;
        }
        #score {
            position: absolute;
            top: 10px;
            left: 10px;
            color: white;
            font-size: 20px;
            z-index: 100;
        }
        #controls {
            position: absolute;
            bottom: 10px;
            left: 10px;
            color: white;
            font-size: 16px;
            z-index: 100;
        }
        #gameOver {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: red;
            font-size: 48px;
            text-align: center;
            display: none;
            text-shadow: 0 0 10px white;
            z-index: 100;
        }
    </style>
</head>
<body>
    <div id="score">Bot còn lại: <span id="botCount">455</span> | Kích thước: <span id="size">20</span></div>
    <div id="controls">Điều khiển: Chuột hoặc chạm màn hình | Mục tiêu: Ăn tất cả 455 bot</div>
    <div id="gameOver">HOÀN THÀNH!<br><span style="font-size: 24px">Bạn đã ăn hết 455 bot!</span></div>
    <canvas id="gameCanvas"></canvas>

    <script>
        // Khởi tạo canvas
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        // Cấu hình game
        const config = {
            botCount: 455,
            initialBallSize: 20,
            sizePerBot: 0.5,
            minBotSize: 5,
            maxBotSize: 15,
            minBotSpeed: 1,
            maxBotSpeed: 3
        };

        // Bóng của người chơi
        const ball = {
            x: canvas.width / 2,
            y: canvas.height / 2,
            radius: config.initialBallSize,
            color: '#FF0000',
            score: 0
        };

        // Tạo 455 bot
        const bots = [];
        for (let i = 0; i < config.botCount; i++) {
            bots.push(createBot());
        }

        function createBot() {
            const size = config.minBotSize + Math.random() * (config.maxBotSize - config.minBotSize);
            return {
                x: Math.random() * (canvas.width - size * 2) + size,
                y: Math.random() * (canvas.height - size * 2) + size,
                radius: size,
                dx: (Math.random() - 0.5) * (config.minBotSpeed + Math.random() * (config.maxBotSpeed - config.minBotSpeed)),
                dy: (Math.random() - 0.5) * (config.minBotSpeed + Math.random() * (config.maxBotSpeed - config.minBotSpeed)),
                color: `hsl(${Math.random() * 360}, 70%, 50%)`
            };
        }

        // Theo dõi vị trí chuột/chạm
        let targetX = ball.x;
        let targetY = ball.y;

        canvas.addEventListener('mousemove', (e) => {
            targetX = e.clientX;
            targetY = e.clientY;
        });

        canvas.addEventListener('touchmove', (e) => {
            e.preventDefault();
            targetX = e.touches[0].clientX;
            targetY = e.touches[0].clientY;
        }, { passive: false });

        // Vẽ bóng
        function drawBall() {
            ctx.beginPath();
            ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2);
            
            // Gradient cho bóng
            const gradient = ctx.createRadialGradient(
                ball.x, ball.y, 0,
                ball.x, ball.y, ball.radius
            );
            gradient.addColorStop(0, 'white');
            gradient.addColorStop(0.7, ball.color);
            gradient.addColorStop(1, 'darkred');
            
            ctx.fillStyle = gradient;
            ctx.fill();
            ctx.closePath();
        }

        // Vẽ bot
        function drawBot(bot) {
            ctx.beginPath();
            ctx.arc(bot.x, bot.y, bot.radius, 0, Math.PI * 2);
            ctx.fillStyle = bot.color;
            ctx.fill();
            ctx.closePath();
        }

        // Kiểm tra va chạm
        function checkCollision(x1, y1, r1, x2, y2, r2) {
            const dx = x1 - x2;
            const dy = y1 - y2;
            return dx * dx + dy * dy < (r1 + r2) * (r1 + r2);
        }

        // Di chuyển bóng theo chuột
        function moveBall() {
            const dx = targetX - ball.x;
            const dy = targetY - ball.y;
            const distance = Math.sqrt(dx * dx + dy * dy);
            
            // Tốc độ di chuyển phụ thuộc vào kích thước
            const speed = Math.max(5 - ball.radius / 20, 1);
            
            if (distance > 5) {
                ball.x += dx / distance * speed;
                ball.y += dy / distance * speed;
            }
            
            // Giới hạn trong màn hình
            ball.x = Math.max(ball.radius, Math.min(canvas.width - ball.radius, ball.x));
            ball.y = Math.max(ball.radius, Math.min(canvas.height - ball.radius, ball.y));
        }

        // Di chuyển bot
        function moveBots() {
            bots.forEach(bot => {
                // Di chuyển bot
                bot.x += bot.dx;
                bot.y += bot.dy;
                
                // Đổi hướng khi chạm biên
                if (bot.x < bot.radius || bot.x > canvas.width - bot.radius) {
                    bot.dx = -bot.dx;
                    bot.x = Math.max(bot.radius, Math.min(canvas.width - bot.radius, bot.x));
                }
                if (bot.y < bot.radius || bot.y > canvas.height - bot.radius) {
                    bot.dy = -bot.dy;
                    bot.y = Math.max(bot.radius, Math.min(canvas.height - bot.radius, bot.y));
                }
                
                // Tránh bóng của người chơi
                const distX = ball.x - bot.x;
                const distY = ball.y - bot.y;
                const distance = Math.sqrt(distX * distX + distY * distY);
                
                if (distance < ball.radius * 2) {
                    const angle = Math.atan2(distY, distX);
                    bot.dx = -Math.cos(angle) * bot.dx;
                    bot.dy = -Math.sin(angle) * bot.dy;
                }
            });
        }

        // Kiểm tra ăn bot
        function checkEatBots() {
            for (let i = bots.length - 1; i >= 0; i--) {
                const bot = bots[i];
                if (checkCollision(ball.x, ball.y, ball.radius, bot.x, bot.y, bot.radius)) {
                    // Chỉ ăn được bot nhỏ hơn
                    if (bot.radius < ball.radius) {
                        // Tăng kích thước bóng
                        ball.radius += config.sizePerBot;
                        ball.score++;
                        
                        // Xóa bot
                        bots.splice(i, 1);
                        
                        // Cập nhật UI
                        document.getElementById('botCount').textContent = bots.length;
                        document.getElementById('size').textContent = Math.floor(ball.radius);
                    }
                }
            }
            
            // Kiểm tra chiến thắng
            if (bots.length === 0) {
                document.getElementById('gameOver').style.display = 'block';
            }
        }

        // Game loop
        function gameLoop() {
            // Xóa màn hình
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Di chuyển
            moveBall();
            moveBots();
            
            // Kiểm tra va chạm
            checkEatBots();
            
            // Vẽ
            bots.forEach(drawBot);
            drawBall();
            
            // Lặp lại
            requestAnimationFrame(gameLoop);
        }

        // Xử lý thay đổi kích thước màn hình
        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });

        // Bắt đầu game
        gameLoop();
    </script>
</body>
</html>